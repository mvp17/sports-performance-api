{% extends 'base.html' %}
{% block Title %}<title xmlns="">Analysis</title> {% endblock %}

{% block info %}
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
    <h1> Analyse your sports performance data</h1>

    <div class="container" style="margin: 25px 10px">
        <div class="form-group" style="margin: 25px 20px">
                {% if messages %}
                    <ul class="messages">
                    {% for message in messages %}
                        <p>
                            <h4 class="alert alert-danger"> {{ message }}</h4>
                        </p>
                    {% endfor %}
                    </ul>
                {% else %}
        </div>
        <div class="container" style="margin: 25px 200px">
            {% for perf_var in perf_vars_list %}
                <input type="checkbox" class="checks" value={{ perf_var }}> {{ perf_var }}
            {% endfor %}
            <button class="btn btn-primary" onclick="getTableValues();"> Save</button>
        </div>
        <script>
            function getTableValues() {
                let checks = document.getElementsByClassName('checks');
                let str = '';

                for ( let i = 0; i < checks.length; i++ ){
                    if ( checks[i].checked === true ){
                        str += checks[i].value + " ";
                    }
                }
                printValues(str);
            }
        </script>
        <script>
            function printValues(str) {
                console.log(str);
                let keys = [];
                let values = [];
                let list_json = {{ dict_csv_files|safe }};
                for(let dict = 0; dict < list_json.length; dict++){
                    for(let key in list_json[dict]){
                        if (list_json[dict].hasOwnProperty(key)){
                            keys.push(key);
                            values.push(list_json[dict][key]);
                        }
                    }
                }

                for(let i in values){
                    console.log(values[i])
                }
                for(let i in keys){
                    console.log(keys[i])
                }

            }
        </script>

    <!-- The text in <th> elements are bold and centered by default.
         The text in <td> elements are regular and left-aligned by default.
         The <tr> tag defines a row in an HTML table.
         A <tr> element contains one or more <th> or <td> elements.
    -->

    </div>
{% endif %}
{% endblock %}
